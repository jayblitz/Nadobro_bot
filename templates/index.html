<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nadobro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body>
    <div id="app">
        <header class="header-bar">
            <div class="header-left">
                <span class="app-logo">NADOBRO</span>
                <span id="networkBadge" class="network-badge">testnet</span>
            </div>
            <div class="header-right">
                <span class="balance-label">Balance</span>
                <span id="headerBalance" class="balance-value">--</span>
            </div>
        </header>

        <main class="content-area">
            <section id="page-dashboard" class="page active">
                <div class="balance-card">
                    <div class="balance-card-label">Available Balance</div>
                    <div id="dashBalance" class="balance-card-amount">--</div>
                    <div class="balance-card-currency">USDT</div>
                </div>
                <div class="section-title">Markets</div>
                <div id="priceGrid" class="price-grid"></div>
                <div class="quick-actions">
                    <button class="btn btn-long" onclick="quickTrade('long')">Long</button>
                    <button class="btn btn-short" onclick="quickTrade('short')">Short</button>
                </div>
                <div class="section-title">Open Positions</div>
                <div id="dashPositions" class="positions-summary">
                    <div class="empty-state">No open positions</div>
                </div>
            </section>

            <section id="page-trade" class="page">
                <div class="section-title">Select Product</div>
                <div id="productGrid" class="product-grid">
                    <button class="product-btn selected" data-product="BTC">BTC</button>
                    <button class="product-btn" data-product="ETH">ETH</button>
                    <button class="product-btn" data-product="SOL">SOL</button>
                    <button class="product-btn" data-product="XRP">XRP</button>
                    <button class="product-btn" data-product="BNB">BNB</button>
                    <button class="product-btn" data-product="LINK">LINK</button>
                    <button class="product-btn" data-product="DOGE">DOGE</button>
                    <button class="product-btn" data-product="AVAX">AVAX</button>
                </div>

                <div id="tradePrice" class="trade-price">--</div>

                <div class="direction-toggle">
                    <button id="btnLong" class="dir-btn dir-long active" onclick="setDirection('long')">Long</button>
                    <button id="btnShort" class="dir-btn dir-short" onclick="setDirection('short')">Short</button>
                </div>

                <div class="form-group">
                    <label class="form-label">Size</label>
                    <div class="size-input-group">
                        <button class="size-btn" onclick="adjustSize(-1)">-</button>
                        <input id="sizeInput" type="number" class="size-input" value="0.01" min="0" step="0.001">
                        <button class="size-btn" onclick="adjustSize(1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Leverage: <span id="leverageValue">1</span>x</label>
                    <input id="leverageSlider" type="range" class="leverage-slider" min="1" max="50" value="1" oninput="updateLeverage()">
                    <div class="leverage-labels">
                        <span>1x</span>
                        <span>10x</span>
                        <span>25x</span>
                        <span>50x</span>
                    </div>
                </div>

                <div class="margin-display">
                    <span class="margin-label">Est. Margin</span>
                    <span id="estMargin" class="margin-value">$0.00</span>
                </div>

                <button id="submitTrade" class="btn btn-trade" onclick="submitTrade()">Place Order</button>
            </section>

            <section id="page-positions" class="page">
                <div class="section-title">Open Positions</div>
                <div id="positionsList" class="positions-list">
                    <div class="empty-state">No open positions</div>
                </div>
                <button id="closeAllBtn" class="btn btn-close-all" onclick="closeAllPositions()" style="display:none;">Close All Positions</button>
            </section>

            <section id="page-wallet" class="page">
                <div class="section-title">Network</div>
                <div class="network-toggle">
                    <button id="btnTestnet" class="net-btn active" onclick="switchNetwork('testnet')">Testnet</button>
                    <button id="btnMainnet" class="net-btn" onclick="switchNetwork('mainnet')">Mainnet</button>
                </div>

                <div class="wallet-card">
                    <div class="wallet-label">Active Address</div>
                    <div class="wallet-address-row">
                        <span id="walletAddress" class="wallet-address">--</span>
                        <button class="copy-btn" onclick="copyAddress()">Copy</button>
                    </div>
                </div>

                <div class="wallet-card">
                    <div class="wallet-label">Deposit</div>
                    <p class="wallet-instructions">Send USDT to your wallet address above to start trading on Nado DEX.</p>
                </div>

                <div id="faucetSection" class="wallet-card">
                    <div class="wallet-label">Testnet Faucet</div>
                    <p class="wallet-instructions">Get free testnet USDT to practice trading.</p>
                    <a href="https://testnet.nado.xyz/portfolio/faucet" target="_blank" class="btn btn-faucet">Open Faucet</a>
                </div>
            </section>
        </main>

        <nav class="tab-bar">
            <button class="tab active" data-tab="dashboard" onclick="switchTab('dashboard')">
                <span class="tab-icon">&#9673;</span>
                <span class="tab-label">Dashboard</span>
            </button>
            <button class="tab" data-tab="trade" onclick="switchTab('trade')">
                <span class="tab-icon">&#8693;</span>
                <span class="tab-label">Trade</span>
            </button>
            <button class="tab" data-tab="positions" onclick="switchTab('positions')">
                <span class="tab-icon">&#9776;</span>
                <span class="tab-label">Positions</span>
            </button>
            <button class="tab" data-tab="wallet" onclick="switchTab('wallet')">
                <span class="tab-icon">&#9672;</span>
                <span class="tab-label">Wallet</span>
            </button>
        </nav>
    </div>

    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <div id="toast" class="toast"></div>

    <div id="mnemonicModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-title">Your Recovery Phrase</div>
            <p class="modal-warning">Write down these words and store them safely. This is the only way to recover your wallet. Never share them with anyone.</p>
            <div id="mnemonicWords" class="mnemonic-words"></div>
            <button class="btn btn-primary" onclick="closeMnemonicModal()">I Have Saved My Phrase</button>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
